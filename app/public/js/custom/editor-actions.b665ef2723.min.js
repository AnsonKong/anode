let selectedEditor;function drawLink(e){selectedEditor=e,$("#myLinkModal").modal({backdrop:"static"}),$("#modalTitle").val(""),$("#modalLink").val("http://")}function saveLink(){$("#myLinkModal").modal("hide"),insertEditorText(`[${$("#modalTitle").val()}](${$("#modalLink").val()})`)}function insertEditorText(e){selectedEditor.codemirror.doc.replaceSelection(e,"end"),selectedEditor.codemirror.focus()}function drawImage(e){selectedEditor=e,$("#myImageModal").modal({backdrop:"static"}),$("#myImageModal input[type=file]").val("")}function uploadImage(){const e=new FormData;e.append("image",$("#myImageModal input[type=file]")[0].files[0]),$.ajax({url:"/upload/topic/img?_csrf="+getCsrf(),data:e,method:"POST",contentType:!1,processData:!1,success:function(e,a,o){if(0==e.code){$("#myImageModal").modal("hide"),insertEditorText(`![${e.data}](${e.data})`)}else $(".upload-img-fail").show(),$(".upload-img-fail").text(e.msg),$(".upload-img-success").hide()},error:function(e){alert("error",e)}})}Editor.toolbar[7]={name:"link",action:drawLink},Editor.toolbar[8]={name:"image",action:drawImage};